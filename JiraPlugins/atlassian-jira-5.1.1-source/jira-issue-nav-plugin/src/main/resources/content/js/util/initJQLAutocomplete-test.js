AJS.test.require("com.atlassian.jira.jira-issue-nav-plugin:issuenav");

module("JQL autocomplete", {
    setup: function() {
        AJS.params.autocompleteEnabled = true;

        var $fixture = jQuery("#qunit-fixture");
        $fixture.append('<div id="jqlFieldz">[{&quot;value&quot;:&quot;affectedVersion&quot;,&quot;displayName&quot;:&quot;affectedVersion&quot;,&quot;auto&quot;:&quot;true&quot;,&quot;orderable&quot;:&quot;true&quot;,&quot;searchable&quot;:&quot;true&quot;,&quot;operators&quot;:[&quot;=&quot;,&quot;!=&quot;,&quot;in&quot;,&quot;not in&quot;,&quot;is&quot;,&quot;is not&quot;,&quot;&lt;&quot;,&quot;&lt;=&quot;,&quot;&gt;&quot;,&quot;&gt;=&quot;],&quot;types&quot;:[&quot;com.atlassian.jira.project.version.Version&quot;]},{&quot;value&quot;:&quot;assignee&quot;,&quot;displayName&quot;:&quot;assignee&quot;,&quot;auto&quot;:&quot;true&quot;,&quot;orderable&quot;:&quot;true&quot;,&quot;searchable&quot;:&quot;true&quot;,&quot;operators&quot;:[&quot;is&quot;,&quot;was not&quot;,&quot;in&quot;,&quot;was not in&quot;,&quot;not in&quot;,&quot;was in&quot;,&quot;=&quot;,&quot;was&quot;,&quot;is not&quot;,&quot;changed&quot;,&quot;!=&quot;],&quot;types&quot;:[&quot;com.atlassian.crowd.embedded.api.User&quot;]},{&quot;value&quot;:&quot;category&quot;,&quot;displayName&quot;:&quot;category&quot;,&quot;auto&quot;:&quot;true&quot;,&quot;searchable&quot;:&quot;true&quot;,&quot;operators&quot;:[&quot;=&quot;,&quot;!=&quot;,&quot;in&quot;,&quot;not in&quot;,&quot;is&quot;,&quot;is not&quot;],&quot;types&quot;:[&quot;com.atlassian.jira.project.ProjectCategory&quot;]},{&quot;value&quot;:&quot;comment&quot;,&quot;displayName&quot;:&quot;comment&quot;,&quot;searchable&quot;:&quot;true&quot;,&quot;operators&quot;:[&quot;~&quot;,&quot;!~&quot;],&quot;types&quot;:[&quot;java.lang.String&quot;]},{&quot;value&quot;:&quot;component&quot;,&quot;displayName&quot;:&quot;component&quot;,&quot;auto&quot;:&quot;true&quot;,&quot;orderable&quot;:&quot;true&quot;,&quot;searchable&quot;:&quot;true&quot;,&quot;operators&quot;:[&quot;=&quot;,&quot;!=&quot;,&quot;in&quot;,&quot;not in&quot;,&quot;is&quot;,&quot;is not&quot;],&quot;types&quot;:[&quot;com.atlassian.jira.bc.project.component.ProjectComponent&quot;]},{&quot;value&quot;:&quot;created&quot;,&quot;displayName&quot;:&quot;created&quot;,&quot;orderable&quot;:&quot;true&quot;,&quot;searchable&quot;:&quot;true&quot;,&quot;operators&quot;:[&quot;=&quot;,&quot;!=&quot;,&quot;in&quot;,&quot;not in&quot;,&quot;is&quot;,&quot;is not&quot;,&quot;&lt;&quot;,&quot;&lt;=&quot;,&quot;&gt;&quot;,&quot;&gt;=&quot;],&quot;types&quot;:[&quot;java.util.Date&quot;]},{&quot;value&quot;:&quot;createdDate&quot;,&quot;displayName&quot;:&quot;createdDate&quot;,&quot;orderable&quot;:&quot;true&quot;,&quot;searchable&quot;:&quot;true&quot;,&quot;operators&quot;:[&quot;=&quot;,&quot;!=&quot;,&quot;in&quot;,&quot;not in&quot;,&quot;is&quot;,&quot;is not&quot;,&quot;&lt;&quot;,&quot;&lt;=&quot;,&quot;&gt;&quot;,&quot;&gt;=&quot;],&quot;types&quot;:[&quot;java.util.Date&quot;]},{&quot;value&quot;:&quot;datePickerCF&quot;,&quot;displayName&quot;:&quot;datePickerCF - cf[10000]&quot;,&quot;orderable&quot;:&quot;true&quot;,&quot;searchable&quot;:&quot;true&quot;,&quot;cfid&quot;:&quot;cf[10000]&quot;,&quot;operators&quot;:[&quot;=&quot;,&quot;!=&quot;,&quot;in&quot;,&quot;not in&quot;,&quot;is&quot;,&quot;is not&quot;,&quot;&lt;&quot;,&quot;&lt;=&quot;,&quot;&gt;&quot;,&quot;&gt;=&quot;],&quot;types&quot;:[&quot;java.util.Date&quot;]},{&quot;value&quot;:&quot;dateTimeCF&quot;,&quot;displayName&quot;:&quot;dateTimeCF - cf[10001]&quot;,&quot;orderable&quot;:&quot;true&quot;,&quot;searchable&quot;:&quot;true&quot;,&quot;cfid&quot;:&quot;cf[10001]&quot;,&quot;operators&quot;:[&quot;=&quot;,&quot;!=&quot;,&quot;in&quot;,&quot;not in&quot;,&quot;is&quot;,&quot;is not&quot;,&quot;&lt;&quot;,&quot;&lt;=&quot;,&quot;&gt;&quot;,&quot;&gt;=&quot;],&quot;types&quot;:[&quot;java.util.Date&quot;]},{&quot;value&quot;:&quot;description&quot;,&quot;displayName&quot;:&quot;description&quot;,&quot;orderable&quot;:&quot;true&quot;,&quot;searchable&quot;:&quot;true&quot;,&quot;operators&quot;:[&quot;~&quot;,&quot;!~&quot;,&quot;is&quot;,&quot;is not&quot;],&quot;types&quot;:[&quot;java.lang.String&quot;]},{&quot;value&quot;:&quot;due&quot;,&quot;displayName&quot;:&quot;due&quot;,&quot;orderable&quot;:&quot;true&quot;,&quot;searchable&quot;:&quot;true&quot;,&quot;operators&quot;:[&quot;=&quot;,&quot;!=&quot;,&quot;in&quot;,&quot;not in&quot;,&quot;is&quot;,&quot;is not&quot;,&quot;&lt;&quot;,&quot;&lt;=&quot;,&quot;&gt;&quot;,&quot;&gt;=&quot;],&quot;types&quot;:[&quot;java.util.Date&quot;]},{&quot;value&quot;:&quot;duedate&quot;,&quot;displayName&quot;:&quot;duedate&quot;,&quot;orderable&quot;:&quot;true&quot;,&quot;searchable&quot;:&quot;true&quot;,&quot;operators&quot;:[&quot;=&quot;,&quot;!=&quot;,&quot;in&quot;,&quot;not in&quot;,&quot;is&quot;,&quot;is not&quot;,&quot;&lt;&quot;,&quot;&lt;=&quot;,&quot;&gt;&quot;,&quot;&gt;=&quot;],&quot;types&quot;:[&quot;java.util.Date&quot;]},{&quot;value&quot;:&quot;environment&quot;,&quot;displayName&quot;:&quot;environment&quot;,&quot;orderable&quot;:&quot;true&quot;,&quot;searchable&quot;:&quot;true&quot;,&quot;operators&quot;:[&quot;~&quot;,&quot;!~&quot;,&quot;is&quot;,&quot;is not&quot;],&quot;types&quot;:[&quot;java.lang.String&quot;]},{&quot;value&quot;:&quot;filter&quot;,&quot;displayName&quot;:&quot;filter&quot;,&quot;auto&quot;:&quot;true&quot;,&quot;searchable&quot;:&quot;true&quot;,&quot;operators&quot;:[&quot;=&quot;,&quot;!=&quot;,&quot;in&quot;,&quot;not in&quot;],&quot;types&quot;:[&quot;com.atlassian.jira.issue.search.SearchRequest&quot;]},{&quot;value&quot;:&quot;fixVersion&quot;,&quot;displayName&quot;:&quot;fixVersion&quot;,&quot;auto&quot;:&quot;true&quot;,&quot;orderable&quot;:&quot;true&quot;,&quot;searchable&quot;:&quot;true&quot;,&quot;operators&quot;:[&quot;was not&quot;,&quot;in&quot;,&quot;&gt;&quot;,&quot;=&quot;,&quot;was in&quot;,&quot;is not&quot;,&quot;was&quot;,&quot;changed&quot;,&quot;&lt;=&quot;,&quot;!=&quot;,&quot;is&quot;,&quot;&lt;&quot;,&quot;was not in&quot;,&quot;not in&quot;,&quot;&gt;=&quot;],&quot;types&quot;:[&quot;com.atlassian.jira.project.version.Version&quot;]},{&quot;value&quot;:&quot;id&quot;,&quot;displayName&quot;:&quot;id&quot;,&quot;orderable&quot;:&quot;true&quot;,&quot;searchable&quot;:&quot;true&quot;,&quot;operators&quot;:[&quot;=&quot;,&quot;!=&quot;,&quot;in&quot;,&quot;not in&quot;,&quot;is&quot;,&quot;is not&quot;,&quot;&lt;&quot;,&quot;&lt;=&quot;,&quot;&gt;&quot;,&quot;&gt;=&quot;],&quot;types&quot;:[&quot;com.atlassian.jira.issue.Issue&quot;]},{&quot;value&quot;:&quot;issue&quot;,&quot;displayName&quot;:&quot;issue&quot;,&quot;orderable&quot;:&quot;true&quot;,&quot;searchable&quot;:&quot;true&quot;,&quot;operators&quot;:[&quot;=&quot;,&quot;!=&quot;,&quot;in&quot;,&quot;not in&quot;,&quot;is&quot;,&quot;is not&quot;,&quot;&lt;&quot;,&quot;&lt;=&quot;,&quot;&gt;&quot;,&quot;&gt;=&quot;],&quot;types&quot;:[&quot;com.atlassian.jira.issue.Issue&quot;]},{&quot;value&quot;:&quot;issuekey&quot;,&quot;displayName&quot;:&quot;issuekey&quot;,&quot;orderable&quot;:&quot;true&quot;,&quot;searchable&quot;:&quot;true&quot;,&quot;operators&quot;:[&quot;=&quot;,&quot;!=&quot;,&quot;in&quot;,&quot;not in&quot;,&quot;is&quot;,&quot;is not&quot;,&quot;&lt;&quot;,&quot;&lt;=&quot;,&quot;&gt;&quot;,&quot;&gt;=&quot;],&quot;types&quot;:[&quot;com.atlassian.jira.issue.Issue&quot;]},{&quot;value&quot;:&quot;issuetype&quot;,&quot;displayName&quot;:&quot;issuetype&quot;,&quot;auto&quot;:&quot;true&quot;,&quot;orderable&quot;:&quot;true&quot;,&quot;searchable&quot;:&quot;true&quot;,&quot;operators&quot;:[&quot;=&quot;,&quot;!=&quot;,&quot;in&quot;,&quot;not in&quot;,&quot;is&quot;,&quot;is not&quot;],&quot;types&quot;:[&quot;com.atlassian.jira.issue.issuetype.IssueType&quot;]},{&quot;value&quot;:&quot;key&quot;,&quot;displayName&quot;:&quot;key&quot;,&quot;orderable&quot;:&quot;true&quot;,&quot;searchable&quot;:&quot;true&quot;,&quot;operators&quot;:[&quot;=&quot;,&quot;!=&quot;,&quot;in&quot;,&quot;not in&quot;,&quot;is&quot;,&quot;is not&quot;,&quot;&lt;&quot;,&quot;&lt;=&quot;,&quot;&gt;&quot;,&quot;&gt;=&quot;],&quot;types&quot;:[&quot;com.atlassian.jira.issue.Issue&quot;]},{&quot;value&quot;:&quot;labels&quot;,&quot;displayName&quot;:&quot;labels&quot;,&quot;auto&quot;:&quot;true&quot;,&quot;orderable&quot;:&quot;true&quot;,&quot;searchable&quot;:&quot;true&quot;,&quot;operators&quot;:[&quot;=&quot;,&quot;!=&quot;,&quot;in&quot;,&quot;not in&quot;,&quot;is&quot;,&quot;is not&quot;],&quot;types&quot;:[&quot;com.atlassian.jira.issue.label.Label&quot;]},{&quot;value&quot;:&quot;level&quot;,&quot;displayName&quot;:&quot;level&quot;,&quot;auto&quot;:&quot;true&quot;,&quot;orderable&quot;:&quot;true&quot;,&quot;searchable&quot;:&quot;true&quot;,&quot;operators&quot;:[&quot;=&quot;,&quot;!=&quot;,&quot;in&quot;,&quot;not in&quot;,&quot;is&quot;,&quot;is not&quot;],&quot;types&quot;:[&quot;com.atlassian.jira.issue.security.IssueSecurityLevel&quot;]},{&quot;value&quot;:&quot;originalEstimate&quot;,&quot;displayName&quot;:&quot;originalEstimate&quot;,&quot;orderable&quot;:&quot;true&quot;,&quot;searchable&quot;:&quot;true&quot;,&quot;operators&quot;:[&quot;=&quot;,&quot;!=&quot;,&quot;in&quot;,&quot;not in&quot;,&quot;is&quot;,&quot;is not&quot;,&quot;&lt;&quot;,&quot;&lt;=&quot;,&quot;&gt;&quot;,&quot;&gt;=&quot;],&quot;types&quot;:[&quot;com.atlassian.jira.types.Duration&quot;]},{&quot;value&quot;:&quot;parent&quot;,&quot;displayName&quot;:&quot;parent&quot;,&quot;searchable&quot;:&quot;true&quot;,&quot;operators&quot;:[&quot;=&quot;,&quot;!=&quot;,&quot;in&quot;,&quot;not in&quot;],&quot;types&quot;:[&quot;com.atlassian.jira.issue.Issue&quot;]},{&quot;value&quot;:&quot;priority&quot;,&quot;displayName&quot;:&quot;priority&quot;,&quot;auto&quot;:&quot;true&quot;,&quot;orderable&quot;:&quot;true&quot;,&quot;searchable&quot;:&quot;true&quot;,&quot;operators&quot;:[&quot;was not&quot;,&quot;in&quot;,&quot;&gt;&quot;,&quot;=&quot;,&quot;was in&quot;,&quot;is not&quot;,&quot;was&quot;,&quot;changed&quot;,&quot;&lt;=&quot;,&quot;!=&quot;,&quot;is&quot;,&quot;&lt;&quot;,&quot;was not in&quot;,&quot;not in&quot;,&quot;&gt;=&quot;],&quot;types&quot;:[&quot;com.atlassian.jira.issue.priority.Priority&quot;]},{&quot;value&quot;:&quot;progress&quot;,&quot;displayName&quot;:&quot;progress&quot;,&quot;orderable&quot;:&quot;true&quot;,&quot;operators&quot;:[],&quot;types&quot;:[&quot;java.lang.Object&quot;]},{&quot;value&quot;:&quot;project&quot;,&quot;displayName&quot;:&quot;project&quot;,&quot;auto&quot;:&quot;true&quot;,&quot;orderable&quot;:&quot;true&quot;,&quot;searchable&quot;:&quot;true&quot;,&quot;operators&quot;:[&quot;=&quot;,&quot;!=&quot;,&quot;in&quot;,&quot;not in&quot;,&quot;is&quot;,&quot;is not&quot;],&quot;types&quot;:[&quot;com.atlassian.jira.project.Project&quot;]},{&quot;value&quot;:&quot;remainingEstimate&quot;,&quot;displayName&quot;:&quot;remainingEstimate&quot;,&quot;orderable&quot;:&quot;true&quot;,&quot;searchable&quot;:&quot;true&quot;,&quot;operators&quot;:[&quot;=&quot;,&quot;!=&quot;,&quot;in&quot;,&quot;not in&quot;,&quot;is&quot;,&quot;is not&quot;,&quot;&lt;&quot;,&quot;&lt;=&quot;,&quot;&gt;&quot;,&quot;&gt;=&quot;],&quot;types&quot;:[&quot;com.atlassian.jira.types.Duration&quot;]},{&quot;value&quot;:&quot;reporter&quot;,&quot;displayName&quot;:&quot;reporter&quot;,&quot;auto&quot;:&quot;true&quot;,&quot;orderable&quot;:&quot;true&quot;,&quot;searchable&quot;:&quot;true&quot;,&quot;operators&quot;:[&quot;is&quot;,&quot;was not&quot;,&quot;in&quot;,&quot;was not in&quot;,&quot;not in&quot;,&quot;was in&quot;,&quot;=&quot;,&quot;was&quot;,&quot;is not&quot;,&quot;changed&quot;,&quot;!=&quot;],&quot;types&quot;:[&quot;com.atlassian.crowd.embedded.api.User&quot;]},{&quot;value&quot;:&quot;request&quot;,&quot;displayName&quot;:&quot;request&quot;,&quot;auto&quot;:&quot;true&quot;,&quot;searchable&quot;:&quot;true&quot;,&quot;operators&quot;:[&quot;=&quot;,&quot;!=&quot;,&quot;in&quot;,&quot;not in&quot;],&quot;types&quot;:[&quot;com.atlassian.jira.issue.search.SearchRequest&quot;]},{&quot;value&quot;:&quot;resolution&quot;,&quot;displayName&quot;:&quot;resolution&quot;,&quot;auto&quot;:&quot;true&quot;,&quot;orderable&quot;:&quot;true&quot;,&quot;searchable&quot;:&quot;true&quot;,&quot;operators&quot;:[&quot;was not&quot;,&quot;in&quot;,&quot;&gt;&quot;,&quot;=&quot;,&quot;was in&quot;,&quot;is not&quot;,&quot;was&quot;,&quot;changed&quot;,&quot;&lt;=&quot;,&quot;!=&quot;,&quot;is&quot;,&quot;&lt;&quot;,&quot;was not in&quot;,&quot;not in&quot;,&quot;&gt;=&quot;],&quot;types&quot;:[&quot;com.atlassian.jira.issue.resolution.Resolution&quot;]},{&quot;value&quot;:&quot;resolutiondate&quot;,&quot;displayName&quot;:&quot;resolutiondate&quot;,&quot;orderable&quot;:&quot;true&quot;,&quot;searchable&quot;:&quot;true&quot;,&quot;operators&quot;:[&quot;=&quot;,&quot;!=&quot;,&quot;in&quot;,&quot;not in&quot;,&quot;is&quot;,&quot;is not&quot;,&quot;&lt;&quot;,&quot;&lt;=&quot;,&quot;&gt;&quot;,&quot;&gt;=&quot;],&quot;types&quot;:[&quot;java.util.Date&quot;]},{&quot;value&quot;:&quot;resolved&quot;,&quot;displayName&quot;:&quot;resolved&quot;,&quot;orderable&quot;:&quot;true&quot;,&quot;searchable&quot;:&quot;true&quot;,&quot;operators&quot;:[&quot;=&quot;,&quot;!=&quot;,&quot;in&quot;,&quot;not in&quot;,&quot;is&quot;,&quot;is not&quot;,&quot;&lt;&quot;,&quot;&lt;=&quot;,&quot;&gt;&quot;,&quot;&gt;=&quot;],&quot;types&quot;:[&quot;java.util.Date&quot;]},{&quot;value&quot;:&quot;savedfilter&quot;,&quot;displayName&quot;:&quot;savedfilter&quot;,&quot;auto&quot;:&quot;true&quot;,&quot;searchable&quot;:&quot;true&quot;,&quot;operators&quot;:[&quot;=&quot;,&quot;!=&quot;,&quot;in&quot;,&quot;not in&quot;],&quot;types&quot;:[&quot;com.atlassian.jira.issue.search.SearchRequest&quot;]},{&quot;value&quot;:&quot;searchrequest&quot;,&quot;displayName&quot;:&quot;searchrequest&quot;,&quot;auto&quot;:&quot;true&quot;,&quot;searchable&quot;:&quot;true&quot;,&quot;operators&quot;:[&quot;=&quot;,&quot;!=&quot;,&quot;in&quot;,&quot;not in&quot;],&quot;types&quot;:[&quot;com.atlassian.jira.issue.search.SearchRequest&quot;]},{&quot;value&quot;:&quot;status&quot;,&quot;displayName&quot;:&quot;status&quot;,&quot;auto&quot;:&quot;true&quot;,&quot;orderable&quot;:&quot;true&quot;,&quot;searchable&quot;:&quot;true&quot;,&quot;operators&quot;:[&quot;is&quot;,&quot;was not&quot;,&quot;in&quot;,&quot;was not in&quot;,&quot;not in&quot;,&quot;was in&quot;,&quot;=&quot;,&quot;was&quot;,&quot;is not&quot;,&quot;changed&quot;,&quot;!=&quot;],&quot;types&quot;:[&quot;com.atlassian.jira.issue.status.Status&quot;]},{&quot;value&quot;:&quot;subtasks&quot;,&quot;displayName&quot;:&quot;subtasks&quot;,&quot;orderable&quot;:&quot;true&quot;,&quot;operators&quot;:[],&quot;types&quot;:[&quot;java.lang.Object&quot;]},{&quot;value&quot;:&quot;summary&quot;,&quot;displayName&quot;:&quot;summary&quot;,&quot;orderable&quot;:&quot;true&quot;,&quot;searchable&quot;:&quot;true&quot;,&quot;operators&quot;:[&quot;~&quot;,&quot;!~&quot;,&quot;is&quot;,&quot;is not&quot;],&quot;types&quot;:[&quot;java.lang.String&quot;]},{&quot;value&quot;:&quot;text&quot;,&quot;displayName&quot;:&quot;text&quot;,&quot;searchable&quot;:&quot;true&quot;,&quot;operators&quot;:[&quot;~&quot;],&quot;types&quot;:[&quot;java.lang.String&quot;]},{&quot;value&quot;:&quot;timeestimate&quot;,&quot;displayName&quot;:&quot;timeestimate&quot;,&quot;orderable&quot;:&quot;true&quot;,&quot;searchable&quot;:&quot;true&quot;,&quot;operators&quot;:[&quot;=&quot;,&quot;!=&quot;,&quot;in&quot;,&quot;not in&quot;,&quot;is&quot;,&quot;is not&quot;,&quot;&lt;&quot;,&quot;&lt;=&quot;,&quot;&gt;&quot;,&quot;&gt;=&quot;],&quot;types&quot;:[&quot;com.atlassian.jira.types.Duration&quot;]},{&quot;value&quot;:&quot;timeoriginalestimate&quot;,&quot;displayName&quot;:&quot;timeoriginalestimate&quot;,&quot;orderable&quot;:&quot;true&quot;,&quot;searchable&quot;:&quot;true&quot;,&quot;operators&quot;:[&quot;=&quot;,&quot;!=&quot;,&quot;in&quot;,&quot;not in&quot;,&quot;is&quot;,&quot;is not&quot;,&quot;&lt;&quot;,&quot;&lt;=&quot;,&quot;&gt;&quot;,&quot;&gt;=&quot;],&quot;types&quot;:[&quot;com.atlassian.jira.types.Duration&quot;]},{&quot;value&quot;:&quot;timespent&quot;,&quot;displayName&quot;:&quot;timespent&quot;,&quot;orderable&quot;:&quot;true&quot;,&quot;searchable&quot;:&quot;true&quot;,&quot;operators&quot;:[&quot;=&quot;,&quot;!=&quot;,&quot;in&quot;,&quot;not in&quot;,&quot;is&quot;,&quot;is not&quot;,&quot;&lt;&quot;,&quot;&lt;=&quot;,&quot;&gt;&quot;,&quot;&gt;=&quot;],&quot;types&quot;:[&quot;com.atlassian.jira.types.Duration&quot;]},{&quot;value&quot;:&quot;type&quot;,&quot;displayName&quot;:&quot;type&quot;,&quot;auto&quot;:&quot;true&quot;,&quot;orderable&quot;:&quot;true&quot;,&quot;searchable&quot;:&quot;true&quot;,&quot;operators&quot;:[&quot;=&quot;,&quot;!=&quot;,&quot;in&quot;,&quot;not in&quot;,&quot;is&quot;,&quot;is not&quot;],&quot;types&quot;:[&quot;com.atlassian.jira.issue.issuetype.IssueType&quot;]},{&quot;value&quot;:&quot;updated&quot;,&quot;displayName&quot;:&quot;updated&quot;,&quot;orderable&quot;:&quot;true&quot;,&quot;searchable&quot;:&quot;true&quot;,&quot;operators&quot;:[&quot;=&quot;,&quot;!=&quot;,&quot;in&quot;,&quot;not in&quot;,&quot;is&quot;,&quot;is not&quot;,&quot;&lt;&quot;,&quot;&lt;=&quot;,&quot;&gt;&quot;,&quot;&gt;=&quot;],&quot;types&quot;:[&quot;java.util.Date&quot;]},{&quot;value&quot;:&quot;updatedDate&quot;,&quot;displayName&quot;:&quot;updatedDate&quot;,&quot;orderable&quot;:&quot;true&quot;,&quot;searchable&quot;:&quot;true&quot;,&quot;operators&quot;:[&quot;=&quot;,&quot;!=&quot;,&quot;in&quot;,&quot;not in&quot;,&quot;is&quot;,&quot;is not&quot;,&quot;&lt;&quot;,&quot;&lt;=&quot;,&quot;&gt;&quot;,&quot;&gt;=&quot;],&quot;types&quot;:[&quot;java.util.Date&quot;]},{&quot;value&quot;:&quot;voter&quot;,&quot;displayName&quot;:&quot;voter&quot;,&quot;searchable&quot;:&quot;true&quot;,&quot;operators&quot;:[&quot;=&quot;,&quot;!=&quot;,&quot;in&quot;,&quot;not in&quot;],&quot;types&quot;:[&quot;com.atlassian.crowd.embedded.api.User&quot;]},{&quot;value&quot;:&quot;votes&quot;,&quot;displayName&quot;:&quot;votes&quot;,&quot;orderable&quot;:&quot;true&quot;,&quot;searchable&quot;:&quot;true&quot;,&quot;operators&quot;:[&quot;=&quot;,&quot;!=&quot;,&quot;in&quot;,&quot;not in&quot;,&quot;&lt;&quot;,&quot;&lt;=&quot;,&quot;&gt;&quot;,&quot;&gt;=&quot;],&quot;types&quot;:[&quot;java.lang.Number&quot;]},{&quot;value&quot;:&quot;watcher&quot;,&quot;displayName&quot;:&quot;watcher&quot;,&quot;searchable&quot;:&quot;true&quot;,&quot;operators&quot;:[&quot;=&quot;,&quot;!=&quot;,&quot;in&quot;,&quot;not in&quot;],&quot;types&quot;:[&quot;com.atlassian.crowd.embedded.api.User&quot;]},{&quot;value&quot;:&quot;watchers&quot;,&quot;displayName&quot;:&quot;watchers&quot;,&quot;orderable&quot;:&quot;true&quot;,&quot;searchable&quot;:&quot;true&quot;,&quot;operators&quot;:[&quot;=&quot;,&quot;!=&quot;,&quot;in&quot;,&quot;not in&quot;,&quot;&lt;&quot;,&quot;&lt;=&quot;,&quot;&gt;&quot;,&quot;&gt;=&quot;],&quot;types&quot;:[&quot;java.lang.Number&quot;]},{&quot;value&quot;:&quot;workratio&quot;,&quot;displayName&quot;:&quot;workratio&quot;,&quot;orderable&quot;:&quot;true&quot;,&quot;searchable&quot;:&quot;true&quot;,&quot;operators&quot;:[&quot;=&quot;,&quot;!=&quot;,&quot;in&quot;,&quot;not in&quot;,&quot;is&quot;,&quot;is not&quot;,&quot;&lt;&quot;,&quot;&lt;=&quot;,&quot;&gt;&quot;,&quot;&gt;=&quot;],&quot;types&quot;:[&quot;java.lang.Number&quot;]}]</div>');
        $fixture.append('<div id="jqlFunctionNamez">[{&quot;value&quot;:&quot;cascadeOption(\\&quot;\\&quot;)&quot;,&quot;displayName&quot;:&quot;cascadeOption(\\&quot;\\&quot;)&quot;,&quot;isList&quot;:&quot;true&quot;,&quot;types&quot;:[&quot;com.atlassian.jira.issue.customfields.option.CascadingOption&quot;]},{&quot;value&quot;:&quot;componentsLeadByUser()&quot;,&quot;displayName&quot;:&quot;componentsLeadByUser()&quot;,&quot;isList&quot;:&quot;true&quot;,&quot;types&quot;:[&quot;com.atlassian.jira.bc.project.component.ProjectComponent&quot;]},{&quot;value&quot;:&quot;currentLogin()&quot;,&quot;displayName&quot;:&quot;currentLogin()&quot;,&quot;types&quot;:[&quot;java.util.Date&quot;]},{&quot;value&quot;:&quot;currentUser()&quot;,&quot;displayName&quot;:&quot;currentUser()&quot;,&quot;types&quot;:[&quot;com.atlassian.crowd.embedded.api.User&quot;]},{&quot;value&quot;:&quot;earliestUnreleasedVersion(\\&quot;\\&quot;)&quot;,&quot;displayName&quot;:&quot;earliestUnreleasedVersion(\\&quot;\\&quot;)&quot;,&quot;types&quot;:[&quot;com.atlassian.jira.project.version.Version&quot;]},{&quot;value&quot;:&quot;endOfDay()&quot;,&quot;displayName&quot;:&quot;endOfDay()&quot;,&quot;types&quot;:[&quot;java.util.Date&quot;]},{&quot;value&quot;:&quot;endOfMonth()&quot;,&quot;displayName&quot;:&quot;endOfMonth()&quot;,&quot;types&quot;:[&quot;java.util.Date&quot;]},{&quot;value&quot;:&quot;endOfWeek()&quot;,&quot;displayName&quot;:&quot;endOfWeek()&quot;,&quot;types&quot;:[&quot;java.util.Date&quot;]},{&quot;value&quot;:&quot;endOfYear()&quot;,&quot;displayName&quot;:&quot;endOfYear()&quot;,&quot;types&quot;:[&quot;java.util.Date&quot;]},{&quot;value&quot;:&quot;issueHistory()&quot;,&quot;displayName&quot;:&quot;issueHistory()&quot;,&quot;isList&quot;:&quot;true&quot;,&quot;types&quot;:[&quot;com.atlassian.jira.issue.Issue&quot;]},{&quot;value&quot;:&quot;lastLogin()&quot;,&quot;displayName&quot;:&quot;lastLogin()&quot;,&quot;types&quot;:[&quot;java.util.Date&quot;]},{&quot;value&quot;:&quot;latestReleasedVersion(\\&quot;\\&quot;)&quot;,&quot;displayName&quot;:&quot;latestReleasedVersion(\\&quot;\\&quot;)&quot;,&quot;types&quot;:[&quot;com.atlassian.jira.project.version.Version&quot;]},{&quot;value&quot;:&quot;linkedIssues(\\&quot;\\&quot;)&quot;,&quot;displayName&quot;:&quot;linkedIssues(\\&quot;\\&quot;)&quot;,&quot;isList&quot;:&quot;true&quot;,&quot;types&quot;:[&quot;com.atlassian.jira.issue.Issue&quot;]},{&quot;value&quot;:&quot;membersOf(\\&quot;\\&quot;)&quot;,&quot;displayName&quot;:&quot;membersOf(\\&quot;\\&quot;)&quot;,&quot;isList&quot;:&quot;true&quot;,&quot;types&quot;:[&quot;com.atlassian.crowd.embedded.api.User&quot;]},{&quot;value&quot;:&quot;now()&quot;,&quot;displayName&quot;:&quot;now()&quot;,&quot;types&quot;:[&quot;java.util.Date&quot;]},{&quot;value&quot;:&quot;projectsLeadByUser()&quot;,&quot;displayName&quot;:&quot;projectsLeadByUser()&quot;,&quot;isList&quot;:&quot;true&quot;,&quot;types&quot;:[&quot;com.atlassian.jira.project.Project&quot;]},{&quot;value&quot;:&quot;projectsWhereUserHasPermission(\\&quot;\\&quot;)&quot;,&quot;displayName&quot;:&quot;projectsWhereUserHasPermission(\\&quot;\\&quot;)&quot;,&quot;isList&quot;:&quot;true&quot;,&quot;types&quot;:[&quot;com.atlassian.jira.project.Project&quot;]},{&quot;value&quot;:&quot;projectsWhereUserHasRole(\\&quot;\\&quot;)&quot;,&quot;displayName&quot;:&quot;projectsWhereUserHasRole(\\&quot;\\&quot;)&quot;,&quot;isList&quot;:&quot;true&quot;,&quot;types&quot;:[&quot;com.atlassian.jira.project.Project&quot;]},{&quot;value&quot;:&quot;releasedVersions()&quot;,&quot;displayName&quot;:&quot;releasedVersions()&quot;,&quot;isList&quot;:&quot;true&quot;,&quot;types&quot;:[&quot;com.atlassian.jira.project.version.Version&quot;]},{&quot;value&quot;:&quot;standardIssueTypes()&quot;,&quot;displayName&quot;:&quot;standardIssueTypes()&quot;,&quot;isList&quot;:&quot;true&quot;,&quot;types&quot;:[&quot;com.atlassian.jira.issue.issuetype.IssueType&quot;]},{&quot;value&quot;:&quot;startOfDay()&quot;,&quot;displayName&quot;:&quot;startOfDay()&quot;,&quot;types&quot;:[&quot;java.util.Date&quot;]},{&quot;value&quot;:&quot;startOfMonth()&quot;,&quot;displayName&quot;:&quot;startOfMonth()&quot;,&quot;types&quot;:[&quot;java.util.Date&quot;]},{&quot;value&quot;:&quot;startOfWeek()&quot;,&quot;displayName&quot;:&quot;startOfWeek()&quot;,&quot;types&quot;:[&quot;java.util.Date&quot;]},{&quot;value&quot;:&quot;startOfYear()&quot;,&quot;displayName&quot;:&quot;startOfYear()&quot;,&quot;types&quot;:[&quot;java.util.Date&quot;]},{&quot;value&quot;:&quot;subTaskIssueTypes()&quot;,&quot;displayName&quot;:&quot;subTaskIssueTypes()&quot;,&quot;isList&quot;:&quot;true&quot;,&quot;types&quot;:[&quot;com.atlassian.jira.issue.issuetype.IssueType&quot;]},{&quot;value&quot;:&quot;unreleasedVersions()&quot;,&quot;displayName&quot;:&quot;unreleasedVersions()&quot;,&quot;isList&quot;:&quot;true&quot;,&quot;types&quot;:[&quot;com.atlassian.jira.project.version.Version&quot;]},{&quot;value&quot;:&quot;votedIssues()&quot;,&quot;displayName&quot;:&quot;votedIssues()&quot;,&quot;isList&quot;:&quot;true&quot;,&quot;types&quot;:[&quot;com.atlassian.jira.issue.Issue&quot;]},{&quot;value&quot;:&quot;watchedIssues()&quot;,&quot;displayName&quot;:&quot;watchedIssues()&quot;,&quot;isList&quot;:&quot;true&quot;,&quot;types&quot;:[&quot;com.atlassian.jira.issue.Issue&quot;]}]</div>');
        $fixture.append('<div id="jqlReservedWordz">[&quot;greater&quot;,&quot;for&quot;,&quot;privileges&quot;,&quot;float&quot;,&quot;validate&quot;,&quot;distinct&quot;,&quot;of&quot;,&quot;break&quot;,&quot;defaults&quot;,&quot;byte&quot;,&quot;initial&quot;,&quot;file&quot;,&quot;noaudit&quot;,&quot;empty&quot;,&quot;on&quot;,&quot;false&quot;,&quot;boolean&quot;,&quot;right&quot;,&quot;option&quot;,&quot;decrement&quot;,&quot;limit&quot;,&quot;else&quot;,&quot;increment&quot;,&quot;fetch&quot;,&quot;equals&quot;,&quot;or&quot;,&quot;number&quot;,&quot;table&quot;,&quot;like&quot;,&quot;create&quot;,&quot;row&quot;,&quot;declare&quot;,&quot;not&quot;,&quot;trans&quot;,&quot;asc&quot;,&quot;start&quot;,&quot;session&quot;,&quot;then&quot;,&quot;view&quot;,&quot;strict&quot;,&quot;explain&quot;,&quot;go&quot;,&quot;unique&quot;,&quot;desc&quot;,&quot;raise&quot;,&quot;exclusive&quot;,&quot;before&quot;,&quot;next&quot;,&quot;inout&quot;,&quot;goto&quot;,&quot;date&quot;,&quot;nowait&quot;,&quot;escape&quot;,&quot;mode&quot;,&quot;character&quot;,&quot;rownum&quot;,&quot;union&quot;,&quot;encoding&quot;,&quot;delete&quot;,&quot;current&quot;,&quot;whenever&quot;,&quot;left&quot;,&quot;do&quot;,&quot;null&quot;,&quot;end&quot;,&quot;min&quot;,&quot;trigger&quot;,&quot;intersection&quot;,&quot;define&quot;,&quot;max&quot;,&quot;previous&quot;,&quot;integer&quot;,&quot;sqrt&quot;,&quot;return&quot;,&quot;true&quot;,&quot;checkpoint&quot;,&quot;divide&quot;,&quot;join&quot;,&quot;access&quot;,&quot;alter&quot;,&quot;field&quot;,&quot;delimiter&quot;,&quot;string&quot;,&quot;exists&quot;,&quot;modulo&quot;,&quot;having&quot;,&quot;public&quot;,&quot;insert&quot;,&quot;abort&quot;,&quot;uid&quot;,&quot;to&quot;,&quot;last&quot;,&quot;grant&quot;,&quot;count&quot;,&quot;transaction&quot;,&quot;synonym&quot;,&quot;inner&quot;,&quot;char&quot;,&quot;drop&quot;,&quot;rename&quot;,&quot;collate&quot;,&quot;by&quot;,&quot;where&quot;,&quot;long&quot;,&quot;identified&quot;,&quot;prior&quot;,&quot;function&quot;,&quot;changed&quot;,&quot;revoke&quot;,&quot;after&quot;,&quot;remainder&quot;,&quot;values&quot;,&quot;more&quot;,&quot;commit&quot;,&quot;when&quot;,&quot;any&quot;,&quot;power&quot;,&quot;notin&quot;,&quot;returns&quot;,&quot;avg&quot;,&quot;index&quot;,&quot;execute&quot;,&quot;minus&quot;,&quot;select&quot;,&quot;int&quot;,&quot;double&quot;,&quot;size&quot;,&quot;rows&quot;,&quot;and&quot;,&quot;difference&quot;,&quot;input&quot;,&quot;default&quot;,&quot;isempty&quot;,&quot;intersect&quot;,&quot;column&quot;,&quot;exec&quot;,&quot;output&quot;,&quot;cf&quot;,&quot;update&quot;,&quot;raw&quot;,&quot;connect&quot;,&quot;set&quot;,&quot;catch&quot;,&quot;sum&quot;,&quot;object&quot;,&quot;from&quot;,&quot;add&quot;,&quot;collation&quot;,&quot;while&quot;,&quot;was&quot;,&quot;share&quot;,&quot;order&quot;,&quot;isnull&quot;,&quot;if&quot;,&quot;less&quot;,&quot;between&quot;,&quot;all&quot;,&quot;with&quot;,&quot;is&quot;,&quot;check&quot;,&quot;alias&quot;,&quot;resource&quot;,&quot;lock&quot;,&quot;into&quot;,&quot;modify&quot;,&quot;audit&quot;,&quot;as&quot;,&quot;multiply&quot;,&quot;in&quot;,&quot;decimal&quot;,&quot;begin&quot;,&quot;subtract&quot;,&quot;immediate&quot;,&quot;outer&quot;,&quot;continue&quot;,&quot;group&quot;,&quot;user&quot;,&quot;rowid&quot;,&quot;first&quot;]</div>');
        $fixture.append('<textarea id="advanced-search" class="advanced-search"></textarea>');
        // Init the JQL autocompleter
        jQuery("#advanced-search").focus();
    }
});

test("JQL autocomplete is active", function() {
    var $advanced = jQuery(".advanced-search");
    ok(!jQuery(".suggestions").is(":visible"), "Suggestions are not visible before user starts typing a query");

    $advanced.val("project ");
    $advanced.keyup();
    ok(jQuery(".suggestions").is(":visible"), "Suggestions dropdown is visible when autocompletions are available");

    $advanced.click();
    ok(!jQuery(".suggestions").is(":visible"), "Suggestions are hidden when the textarea is clicked");
});

test("JQL autocomplete is active after removing and re-adding textarea element", function() {
    var $fixture = jQuery("#qunit-fixture");
    $fixture.find('textarea').remove();
    $fixture.append('<textarea id="advanced-search" class="advanced-search"></textarea>');
    var $advanced = $fixture.find("textarea");

    $advanced.focus();
    $advanced.val("project ");
    $advanced.keyup();

    ok(jQuery(".suggestions").is(":visible"), "Suggestions dropdown is visible after re-rendering textarea");
});

test("JQL autocomplete is can be disabled", function() {
    AJS.params.autocompleteEnabled = false;

    var $fixture = jQuery("#qunit-fixture");
    $fixture.find('textarea').remove();
    $fixture.append('<textarea id="advanced-search" class="advanced-search"></textarea>');
    var $advanced = $fixture.find("textarea");

    $advanced.focus();
    $advanced.val("project ");
    $advanced.keyup();

    ok(!jQuery(".suggestions").is(":visible"), "No suggestions should be visible since the autocomplete is disabled!");
});
